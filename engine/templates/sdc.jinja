{#
    This template was created by HSE University students
    Dmitriy Pchelkin (hell03end) and Alexey Ivanov (DigiDon)
    and should be distribured without any warranty ("as is")
#}
{# TODO: remove weird {{ "" }} line separators if possible #}
{# TODO: fix template rendering result: strings are incorrectly separated with \n #}
{%- extends "base_.jinja" -%}

{%- block message -%}
# Users are recommended to modify this file to match users logic.
{%- endblock message -%}

{%- block body -%}

{%- if create_clock -%}
#**************************#
#       Create Clock       #
#**************************#
    {%- for c in create_clock -%}
        {%- if not c -%}
{{ "" }}
        {%- elif 'deriv' in c -%}
{{ c['deriv'] }}
        {%- else -%}
            {%- if 'comment' in c -%}
# {{ c['comment'] }}
            {%- endif -%}
create_clock -period {{ c['period'] }} {%- if 'name' in c -%} -name {{ c['name'] }} {%- endif -%} {%- if 'ports' in c -%} [get_ports {{ c['ports'] }}] {%- endif -%} {{ c.get('etc', "") }}
        {%- endif -%}
    {%- endfor -%}
{%- endif -%}

{%- if create_generated_clock -%}
#************************************#
#       Create Generated Clock       #
#************************************#
    {%- for c in create_generated_clock -%}
        {%- if not c -%}
{{ "" }}
        {%- elif 'deriv' in c -%}
{{ c['deriv'] }}
{#TODO#}{%- else -%}
        {%- endif -%}
    {%- endfor -%}
{%- endif -%}

{%- if set_clock_latency -%}
#*******************************#
#       Set Clock Latency       #
#*******************************#
    {%- for c in set_clock_latency -%}
        {%- if not c -%}
{{ "" }}
        {%- elif 'deriv' in c -%}
{{ c['deriv'] }}
{#TODO#}{%- else -%}
        {%- endif -%}
    {%- endfor -%}
{%- endif -%}

{%- if set_clock_uncertainty -%}
#***********************************#
#       Set Clock Uncertainty       #
#***********************************#
    {%- for c in set_clock_uncertainty -%}
        {%- if not c -%}
{{ "" }}
        {%- elif 'deriv' in c -%}
{{ c['deriv'] }}
{#TODO#}{%- else -%}
        {%- endif -%}
    {%- endfor -%}
{%- endif -%}

{%- if set_input_delay -%}
#***************************#
#       Set Input Delay     #
#***************************#
# max : Board Delay (Data) - Board Delay (Clock) + tsu (External Device)
# min : Board Delay (Data) - Board Delay (Clock) - th (External Device)
    {%- for c in set_input_delay -%}
        {%- if not c -%}
{{ "" }}
        {%- elif 'deriv' in c -%}
{{ c['deriv'] }}
        {%- else -%}
            {%- if 'comment' in c -%}
# {{ c['comment'] }}
            {%- endif -%}
set_input_delay {%- if 'type' in c -%} -{{ c['type'] }} {%- endif -%} -clock {{ c['clock'] }} {%- if 'clock_fall' in c -%} -clock_fall {%- endif -%} [get_ports {{ c['ports'] }}]
        {%- endif -%}
    {%- endfor -%}
{%- endif -%}

{%- if set_output_delay -%}
#******************************#
#       Set Output Delay       #
#******************************#
# max : Board Delay (Data) - Board Delay (Clock) + tsu (External Device)
# min : Board Delay (Data) - Board Delay (Clock) - th (External Device)
    {%- for c in set_output_delay -%}
        {%- if not c -%}
{{ "" }}
        {%- elif 'deriv' in c -%}
{{ c['deriv'] }}
        {%- else -%}
            {%- if 'comment' in c -%}
# {{ c['comment'] }}
            {%- endif -%}
set_output_delay -{{ c['type'] }} -clock {{ c['clock'] }}{{ "\t" }}[get_ports {{ c['ports'] }}]
        {%- endif -%}
    {%- endfor -%}
{%- endif -%}

{%- if set_clock_groups -%}
#*******************************#
#       Set Clock Groups        #
#*******************************#
    {%- for c in set_clock_groups -%}
        {%- if not c -%}
{{ "" }}
        {%- elif 'deriv' in c -%}
{{ c['deriv'] }}
{#TODO#}{%- else -%}
        {%- endif -%}
    {%- endfor -%}
{%- endif -%}

{%- if set_false_path -%}
#****************************#
#       Set False Path       #
#****************************#
    {%- for c in set_false_path -%}
        {%- if not c -%}
{{ "" }}
        {%- elif 'deriv' in c -%}
{{ c['deriv'] }}
{#TODO#}{%- else -%}
        {%- endif -%}
    {%- endfor -%}
{%- endif -%}

{%- if set_multicycle_path -%}
#*********************************#
#       Set Multicycle Path       #
#*********************************#
    {%- for c in set_multicycle_path -%}
        {%- if not c -%}
{{ "" }}
        {%- elif 'deriv' in c -%}
{{ c['deriv'] }}
{#TODO#}{%- else -%}
        {%- endif -%}
    {%- endfor -%}
{%- endif -%}

{%- if set_maximum_delay -%}
#*******************************#
#       Set Maximum Delay       #
#*******************************#
    {%- for c in set_maximum_delay -%}
        {%- if not c -%}
{{ "" }}
        {%- elif 'deriv' in c -%}
{{ c['deriv'] }}
{#TODO#}{%- else -%}
        {%- endif -%}
    {%- endfor -%}
{%- endif -%}

{%- if set_minimum_delay -%}
#*******************************#
#       Set Minimum Delay       #
#*******************************#
    {%- for c in set_minimum_delay -%}
        {%- if not c -%}
{{ "" }}
        {%- elif 'deriv' in c -%}
{{ c['deriv'] }}
{#TODO#}{%- else -%}
        {%- endif -%}
    {%- endfor -%}
{%- endif -%}

{%- if set_input_transition -%}
#**********************************#
#       Set Input Transition       #
#**********************************#
    {%- for c in set_input_transition -%}
        {%- if not c -%}
{{ "" }}
        {%- elif 'deriv' in c -%}
{{ c['deriv'] }}
{#TODO#}{%- else -%}
        {%- endif -%}
    {%- endfor -%}
{%- endif -%}

{%- if set_load -%}
#******************************#
#           Set Load           #
#******************************#
    {%- for c in set_load -%}
        {%- if not c -%}
{{ "" }}
        {%- elif 'deriv' in c -%}
{{ c['deriv'] }}
{#TODO#}{%- else -%}
        {%- endif -%}
    {%- endfor -%}
{%- endif -%}

{%- endblock body -%}
